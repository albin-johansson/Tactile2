project(tactile-core CXX)

add_library(tactile-core STATIC)
add_library(tactile::core ALIAS tactile-core)

set(TACTIlE_CORE_INC_PREFIX "${PROJECT_SOURCE_DIR}/inc/tactile/core")
set(TACTIlE_CORE_SRC_PREFIX "${PROJECT_SOURCE_DIR}/src/tactile/core")

target_sources(tactile-core
               PRIVATE
               "${TACTIlE_CORE_INC_PREFIX}/cmd/meta/create_property_command.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/cmd/meta/create_property_command.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/cmd/meta/update_property_command.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/cmd/meta/update_property_command.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/cmd/command.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/cmd/command_stack.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/cmd/command_stack.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/debug/assert.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/debug/assert.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/debug/exception.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/debug/exception.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/debug/generic_error.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/debug/generic_error.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/debug/performance.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/debug/performance.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/debug/stacktrace.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/debug/stacktrace.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/debug/terminate.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/debug/terminate.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/debug/validation.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/document/document.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/document/document_manager.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/document/document_manager.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/document/map_document.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/document/map_document.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/engine/engine.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/engine/engine.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/engine/engine_app.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/entity/entity.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/entity/entity.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/entity/registry.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/entity/registry.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/event/dialog_events.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/event/edit_event_handler.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/event/edit_event_handler.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/event/edit_events.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/event/event_dispatcher.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/event/event_dispatcher.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/event/file_event_handler.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/event/file_event_handler.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/event/file_events.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/event/layer_event_handler.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/event/layer_event_handler.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/event/layer_events.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/event/map_event_handler.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/event/map_event_handler.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/event/map_events.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/event/view_event_handler.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/event/view_event_handler.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/event/view_events.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/event/viewport_event_handler.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/event/viewport_event_handler.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/event/viewport_events.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/io/compress/compression_error.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/io/compress/compression_error.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/io/compress/compression_provider.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/io/compress/compression_type.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/io/compress/zlib_compression_provider.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/io/compress/zlib_compression_provider.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/io/compress/zstd_compression_provider.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/io/compress/zstd_compression_provider.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/io/save/ir.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/io/save/save_format.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/io/save/save_format_id.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/io/save/save_format_id.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/io/save/vec_serialization.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/io/save/vec_serialization.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/io/byte_stream.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/io/ini.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/io/ini.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/io/texture.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/layer/dense_tile_matrix.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/layer/dense_tile_matrix.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/layer/group_layer.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/layer/group_layer.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/layer/layer.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/layer/layer.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/layer/layer_type.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/layer/object.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/layer/object.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/layer/object_layer.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/layer/object_layer.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/layer/object_type.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/layer/sparse_tile_matrix.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/layer/sparse_tile_matrix.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/layer/tile_layer.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/layer/tile_layer.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/layer/tile_matrix.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/log/log_level.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/log/log_sink.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/log/logger.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/log/logger.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/log/set_log_scope.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/log/set_log_scope.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/log/terminal_log_sink.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/log/terminal_log_sink.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/map/map.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/map/map.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/map/map_orientation.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/map/map_spec.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/map/map_spec.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/meta/attribute.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/meta/attribute.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/meta/attribute_type.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/meta/attribute_type.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/meta/color.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/meta/color.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/meta/meta.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/model/model.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/model/model.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/model/settings.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/model/settings.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/numeric/random.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/numeric/random.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/numeric/vec.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/numeric/vec_common.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/numeric/vec_format.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/numeric/vec_stream.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/persist/protobuf_context.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/persist/protobuf_context.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/platform/bits.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/platform/dynamic_library.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/platform/dynamic_library.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/platform/environment.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/platform/environment.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/platform/file_dialog.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/platform/file_dialog.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/platform/filesystem.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/platform/filesystem.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/platform/sdl_context.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/platform/sdl_context.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/platform/win32.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/platform/win32.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/platform/window.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/platform/window.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/tile/animation.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/tile/animation.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/tile/tile.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/tile/tile.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/tile/tile_encoding.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/tile/tileset.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/tile/tileset.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/tile/tileset_spec.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/common/buttons.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/common/buttons.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/common/icons.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/common/icons.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/common/menus.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/common/menus.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/common/popups.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/common/popups.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/common/style.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/common/style.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/common/widgets.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/common/widgets.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/common/window.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/common/window.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/dialog/new_map_dialog.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/dialog/new_map_dialog.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/dock/component_dock.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/dock/component_dock.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/dock/dock_space.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/dock/dock_space.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/dock/document_dock.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/dock/document_dock.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/dock/layer_dock.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/dock/layer_dock.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/dock/log_dock.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/dock/log_dock.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/dock/property_dock.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/dock/property_dock.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/dock/tileset_dock.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/dock/tileset_dock.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/i18n/language.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/i18n/language.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/i18n/language_id.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/i18n/language_parser.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/i18n/language_parser.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/i18n/string_id.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/menu/debug_menu.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/menu/debug_menu.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/menu/edit_menu.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/menu/edit_menu.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/menu/file_menu.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/menu/file_menu.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/menu/help_menu.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/menu/help_menu.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/menu/map_menu.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/menu/map_menu.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/menu/menu_bar.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/menu/menu_bar.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/menu/tileset_menu.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/menu/tileset_menu.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/menu/view_menu.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/menu/view_menu.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/render/hexagon_info.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/render/hexagon_info.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/canvas_renderer.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/canvas_renderer.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/fonts.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/fonts.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/imgui_compat.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/imgui_context.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/imgui_context.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/shortcuts.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/shortcuts.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/theme.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/viewport.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/viewport.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/ui/widget_manager.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/ui/widget_manager.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/util/format.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/util/lookup.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/util/matrix_extent.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/util/matrix_extent.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/util/matrix_index.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/util/matrix_index.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/util/memory_buffer.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/util/scope_guard.hpp"
               "${TACTIlE_CORE_INC_PREFIX}/util/string_conv.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/util/string_conv.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/util/string_ops.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/util/string_ops.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/util/uuid.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/util/uuid.cpp"
               "${TACTIlE_CORE_INC_PREFIX}/tactile_editor.hpp"
               "${TACTIlE_CORE_SRC_PREFIX}/tactile_editor.cpp"
               )

tactile_prepare_target(tactile-core)

target_include_directories(tactile-core
                           PUBLIC
                           "${PROJECT_SOURCE_DIR}/inc"

                           SYSTEM PUBLIC
                           "${TACTILE_VENDOR_DIR}/centurion"
                           "${TACTILE_VENDOR_DIR}/fontawesome"
                           )

target_compile_definitions(tactile-core
                           PUBLIC
                           "IMGUI_DEFINE_MATH_OPERATORS"

                           PRIVATE
                           "BOOST_STACKTRACE_GNU_SOURCE_NOT_REQUIRED"
                           "BOOST_UUID_RANDOM_PROVIDER_FORCE_WINCRYPT"
                           "CENTURION_NO_SDL_IMAGE"
                           "CENTURION_NO_SDL_MIXER"
                           "CENTURION_NO_SDL_TTF"
                           "WIN32_LEAN_AND_MEAN"
                           "NOMINMAX"
                           )

target_link_libraries(tactile-core
                      PUBLIC
                      tactile::base
                      tactile::render
                      EnTT::EnTT
                      imgui::imgui

                      PRIVATE
                      SDL2::SDL2
                      Boost::boost
                      FastFloat::fast_float
                      magic_enum::magic_enum
                      SDL2::SDL2
                      protobuf::libprotobuf
                      tinyfiledialogs::tinyfiledialogs
                      ZLIB::ZLIB
                      $<IF:$<TARGET_EXISTS:zstd::libzstd_shared>,zstd::libzstd_shared,zstd::libzstd_static>
                      )
